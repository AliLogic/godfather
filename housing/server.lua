local houses = {
    {
        id = 1,
        spawn = {-170925.921875, -33268.609375, 1229.1983642578, 0}
        doors = {
            {
                entity = -1,
                model = 20,
                x = -171043,
                y = -33401,
                z = 1131,
                r = 90
            },
            {
                entity = -1,
                model = 23,
                x = -171090,
                y = -33189,
                z = 1130,
                r = 0
            },
            {
                entity = -1,
                model = 41,
                x = -172818,
                y = -33414,
                z = 1025,
                r = 0
            }
        }
    },
    {
        id = 2,
        spawn = {-174669.234375, -36615.8203125, 1227.7788085938, 0}
        doors = {
            {
                entity = -1,
                model = 20,
                x = -174799,
                y = -36578,
                z = 1129,
                r = 0
            },
            {
                entity = -1,
                model = 23,
                x = -174097,
                y = -37446,
                z = 1129,
                r = 0
            },
            {
                entity = -1,
                model = 23,
                x = -174380,
                y = -36595,
                z = 1468,
                r = 0
            },
            {
                entity = -1,
                model = 23,
                x = -174139,
                y = -37072,
                z = 1467,
                r = 90
            },
            {
                entity = -1,
                model = 41,
                x = -174589,
                y = -38487,
                z = 1025,
                r = -90
            }
        }
    },
    {
        id = 3,
        spawn = {-177951.015625, -36964.82421875, 1236.9774169922, 0}
        doors = {
            {
                entity = -1,
                model = 20,
                x = -177823,
                y = -37014,
                z = 1139,
                r = 180
            },
            {
                entity = -1,
                model = 23,
                x = -178293,
                y = -36769,
                z = 1139,
                r = 90
            },
            {
                entity = -1,
                model = 41,
                x = -177836,
                y = -38578,
                z = 1025,
                r = 90
            }
        }
    },
    {
        id = 4,
        spawn = {-177982.640625, -41709.20703125, 1235.4838867188, 0}
        doors = {
            {
                entity = -1,
                model = 20,
                x = -177842,
                y = -41749,
                z = 1137,
                r = 180
            },
            {
                entity = -1,
                model = 23,
                x = -178502,
                y = -41690,
                z = 1137,
                r = 90
            }
        }
    },
    {
        id = 5,
        spawn = {-174131.640625, -41843.55859375, 1227.8481445313, 0}
        doors = {
            {
                entity = -1,
                model = 21,
                x = -174179,
                y = -41970,
                z = 1129,
                r = 90
            },
            {
                entity = -1,
                model = 41,
                x = -172828,
                y = -41752,
                z = 1025,
                r = 0
            }
        }
    },
    {
        id = 6,
        spawn = {-169924.265625, -45905.42578125, 1240.1983642578, 0}
        doors = {
            {
                entity = -1,
                model = 20,
                x = -169720,
                y = -45762,
                z = 1141,
                r = 270
            },
            {
                entity = -1,
                model = 22,
                x = -170169,
                y = -46594,
                z = 1141,
                r = 90
            },
            {
                entity = -1,
                model = 24,
                x = -169674,
                y = -45973,
                z = 1142,
                r = 180
            }
        }
    },
    {
        id = 7,
        spawn = {-174477.25, -46827.19921875, 1247.6391601563, 0}
        doors = {
            {
                entity = -1,
                model = 20,
                x = -174585,
                y = -46782,
                z = 1150,
                r = 0
            },
            {
                entity = -1,
                model = 41,
                x = -174588,
                y = -45277,
                z = 1025,
                r = -90
            }
        }
    },
    {
        id = 8,
        spawn = {-177772.359375, -45908.84765625, 1239.1857910156, 0}
        doors = {
            {
                entity = -1,
                model = 20,
                x = -177721,
                y = -45803,
                z = 1140,
                r = -90
            },
            {
                entity = -1,
                model = 23,
                x = -177673,
                y = -46192,
                z = 1140,
                r = 180
            }
        }
    },
    {
        id = 9,
        spawn = {-177647.359375, -49682.26953125, 1244.6986083984, 0}
        doors = {
            {
                entity = -1,
                model = 21,
                x = -177532,
                y = -49729,
                z = 1145,
                r = 180
            },
            {
                entity = -1,
                model = 23,
                x = -178660,
                y = -49881,
                z = 1146,
                r = 0
            },
            {
                entity = -1,
                model = 22,
                x = -179061,
                y = -49841,
                z = 1146,
                r = 0
            }
        }
    },
    {
        id = 10,
        spawn = {-162374.625, -36704.3828125, 1179.8830566406, 0}
        doors = {
            {
                id = -1,
                model = 40,
                x = -162288,
                y = -36656,
                z = 1085,
                r = 0
            }
        }
    },
    {
        id = 11,
        spawn = {-161461.625, -39828.9140625, 1182.1553955078, 0}
        doors = {
            {
                id = -1,
                model = 40,
                x = -161386,
                y = -39784,
                z = 1085,
                r = 0
            }
        }
    },
    {
        id = 12,
        spawn = {-158540.296875, -39682.5078125, 1183.2471923828, 0}
        doors = {
            {
                id = -1,
                model = 40,
                x = -158468,
                y = -39638.199219,
                z = 1085,
                r = 0
            }
        }
    },
    {
        id = 13,
        spawn = {-158366.25, -36742.921875, 1179.8830566406, 0}
        doors = {
            {
                id = -1,
                model = 40,
                x = -158320,
                y = -36831.199219,
                z = 1085,
                r = -90
            }
        }
    },
    {
        id = 14,
        spawn = {-155138.546875, -37943.53515625, 1179.8830566406, 0}
        doors = {
            {
                id = -1,
                model = 40,
                x = -155095,
                y = -38000.199219,
                z = 1085,
                r = -90
            }
        }
    },
    {
        id = 15,
        spawn = {-155251.765625, -35692.234375, 1182.1553955078, 0}
        doors = {
            {
                id = -1,
                model = 40,
                x = -155325,
                y = -35741,
                z = 1085,
                r = -180
            }
        }
    }
}

local function getDoorHouse(door)
    for i=1,#houses do
        for j=1,#houses[i].doors do
            if houses[i].doors[j].entity == door then
                return i,j
            end
        end
    end
    return 0, 0
end

AddEvent("OnPackageStart", function()
    for i=1,#houses do
        for j=1,#houses[i].doors do
            houses[i].doors[j].entity = CreateDoor(houses[i].doors[j].model, houses[i].doors[j].x, houses[i].doors[j].y, houses[i].doors[j].z, houses[i].doors[j].r, true)
        end
    end
end)

AddEvent("OnPlayerInteractDoor", function(player, door, bWantsOpen)
    local house = getDoorHouse(door)
    if house == 0 then
        return
    end
    SetDoorOpen(door, not IsDoorOpen(door))
    AddPlayerChat(player, "House: "..house)
end)
